# VocaDB OpenAPI Java Client Autofixer

Autofix for VocaDB API Java Client generated by OpenAPI

## How to use

### 1. Generate the raw client

1. install OpenAPI
2. grab the `swagger.json` from VocaDB API [page](https://vocadb.net/swagger/index.html)
3. open bash and run these command
```
openapi-generator-cli generate \
--api-package <your package>.api \
--model-package <your package>.model \
--invoker-package <your package>.client \
-i <location of the`swagger.json file> \
--group-id <your group-id> \
--artifact-id <your artifact-id> \
--artifact-version <your version> \
-g java  \
  -p java8=true \
  -p dateLibrary=java8-localdatetime \
  -p useRuntimeException=true \
  -p openApiNullable=false \
  -p serializationLibrary=jackson \
--library <any candidates other than okhttp-gson> \
-o <give a name to your client directory>
```

  - available library candidates are specified in OpenAPI Java [page](https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/java.md)
  - the [sample-unfixed-client](sample-unfixed-client/) is generated by

```
openapi-generator-cli generate \
  --api-package cx.mikufan.vocadbapiclient.api \
  --model-package cx.mikufan.vocadbapiclient.model \
  --invoker-package cx.mikufan.vocadbapiclient.client \
  -i ./swagger.json \
  --group-id cx.mikufan \
  --artifact-id vocadb-api-client \
  --artifact-version 1.0.0 \
  -g java  \
    -p java8=true \
    -p dateLibrary=java8-localdatetime \
    -p useRuntimeException=true \
    -p openApiNullable=false \
    -p serializationLibrary=jackson \
  --library resttemplate \
  -o vocadb-api-client-resttemplate
```

4. (Optional) update some of the dependencies used by the client 

### 2. Fix your generated client with this auto fixer

1. open the [my-config.yml](./vocadb-apiclient-fixer/my-config.yml) file and edit it
   1. input directory is where your auto-generated client is
      - can be relative path from the `./vocadb-apiclient-fixer` perspective
   2. relative path to model is the relative path from your input directory to path of `--model-package`
2. cd into [vocadb-apiclient-fixer](vocadb-apiclient-fixer/), run `./mvnw spring-boot:run '-Dspring-boot.run.arguments="--spring.config.import=file:my-config.yml"'`
3. your client should be ready to use ðŸ˜‰
